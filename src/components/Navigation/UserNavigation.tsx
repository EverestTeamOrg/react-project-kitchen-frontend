import React, { useState } from "react";
import { useDispatch, useSelector } from "react-redux";
import { Link, useHistory } from "react-router-dom";
import { logout } from "../../services/commonSlice";
import {
  UserNavigationList,
  NavigationItem,
  UserNavAvatar,
  NewNoteIcon,
  SettingsIcon,
  LogoutIcon,
  CustomNavigationLink,
} from "../StyledComponents/NavigationStyles";

const UserNavigation = () => {
  const dispatch = useDispatch();
  const { currentUser } = useSelector((state: any) => state.common);
  const [isHovered, setIsHovered] = useState(false);
  const history = useHistory();

  const onLogoutClick = () => {
    dispatch(logout());
    history.push("/");
  };

  return (
    <UserNavigationList
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
      isHovered={isHovered}
    >
      <NavigationItem>
        <CustomNavigationLink to={`@${currentUser.username}`} />
        <UserNavAvatar
          // TODO: fix
          src="data:image/jpeg;base64,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"
          alt=""
        />
        {currentUser.username}
      </NavigationItem>

      <NavigationItem>
        <CustomNavigationLink to="editor" />
        <NewNoteIcon />
        Новая запись
      </NavigationItem>

      <NavigationItem>
        <CustomNavigationLink to="settings" />
        <SettingsIcon />
        Настройки
      </NavigationItem>

      <NavigationItem onClick={onLogoutClick}>
        <LogoutIcon />
        Выйти
      </NavigationItem>
    </UserNavigationList>
  );
};

export default UserNavigation;
